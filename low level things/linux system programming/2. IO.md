> [!note] file table
 Per ogni processo esiste una lista di file aperti, e accedo a questa table usando i file descriptor (interi positivi)

Nella file table, ogni entry contiene informazioni su: puntatore alla copia in memoria dei metadati dell'inode.

> **Nota**: il file descriptor in `c` e' di tipo `int`.

Ogni processo ha 3 file descriptor aperti: `0, 1, 2`, rispettivamente `stdin`, `stdout`, `stderr`.

> **Nota**: `libc` definisice `STDIN_FILENO`, `STDOUT_FILENO` e `STDERR_FILENO`.

Normalmente `STDIN_FILENO` e' l'input dal terminale, ossia la tastiera, mentre `STDOUT_FILENO` e' l'output testuale.

> **Nota**: con le pipe e' possibile ridirezionare `STDOUT_FILENO` di un processo verso `STDIN_FILENO` di un'altro processo.

> **Nota**: un processo figlio di default ha la stessa file table del padre.

# aprire i file
```c
int open(const char *name, int flags);
int open(const char *name, int flags, mode_t mode);

// esempio
int fd;
fd = open("/home/kidd/madagascar", O_RDONLY);
if (fd == -1) /* error */
```

`flags` contiene un'**access mode** tra `O_RDONLY, O_WRONLY, O_RDWR`.

Altre flag sono:

| flag          | desc                                                                                                 |
| ------------- | ---------------------------------------------------------------------------------------------------- |
| `O_APPEND`    | **append mode**, ossia, prima di una write la posizione del file sara aggiornata alla fine           |
| `O_ASYNC`     | **Genera il segnale** `SIGIO` ogni volta che il file diventa leggibile o scrivibile.                 |
| `O_CLOSEXEC`  | imposta `close-on-exec` sul file aperto. Quando viene creato un nuovo processo, questo verra chiuso. |
| `O_CREAT`     | Crea se non esiste.                                                                                  |
| `O_DIRECT`    |                                                                                                      |
| `O_DIRECTORY` | usato da `opendir`                                                                                   |
| `O_EXCL`      | con `O_CREAT` la flag caus                                                                           |
| `O_LARGEFILE` |                                                                                                      |
